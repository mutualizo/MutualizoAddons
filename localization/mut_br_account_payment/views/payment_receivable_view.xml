<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

	    <record id="view_pay_and_rec_list" model="ir.ui.view">
	        <field name="name">payment.receivables.list</field>
	        <field name="model">account.move.line</field>
	        <field name="priority" eval="20"/>
	        <field name="arch" type="xml"> 
	            <tree default_order="date_maturity" string="Payments" decoration-danger="date_maturity&lt;current_date" 
	                  decoration-muted="reconciled==True" create="false" edit="false">
	                <field name="date"/>
	                <field name="partner_id"/>
	                <field name="name"/>
	                <field name="account_id" optional="hide"/>
                    <field name="account_type" widget="badge"/>
	                <field name="currency_id" groups="base.group_multi_currency"/>
	                <field name="amount_currency" string="Valor Título" sum="Total"/>
	                <field name="discount_amount_currency" string="Valor Desconto" sum="Desc.Total" optional="show"/>
	                <field name="discount_balance" string="Valor Residual" sum="Tot.Devido" options="{'currency_field': 'currency_id', 'field_digits': True}"/>
	                <field name="date_maturity"/>
	                <field name="move_id" optional="hide"/>
	                <field name="reconciled" string="Quitado"/>
	                <field name="payment_date"/>
	            </tree>
	        </field>
	    </record>

        <record id="view_pay_and_rec_graph_date" model="ir.ui.view">
            <field name="name">pay.and.rec.graph.date</field>
            <field name="model">account.move.line</field>
            <field name="arch" type="xml">
                <graph string="Account Statistics" sample="1">
                    <field name="partner_id"/>
                    <field name="date"/>
                    <field name="balance" operator="+" type='measure'/>
                </graph>
            </field>
        </record>

        <record id="view_pay_and_rec_pivot" model="ir.ui.view">
            <field name="name">pay.and.rec.pivot</field>
            <field name="model">account.move.line</field>
            <field name="arch" type="xml">
                <pivot string="Partner Items" sample="1">
                    <field name="partner_id" type="row"/>
                    <field name="date" type="col"/>
                    <field name="balance" type="measure"/>
                </pivot>
            </field>
        </record>
	
	    <record id="view_pay_and_rec_filter" model="ir.ui.view">
	        <field name="name">pay.and.rec.search</field>
	        <field name="model">account.move.line</field>
	        <field name="priority" eval="20"/>
	        <field name="arch" type="xml">
	            <search string="Search Payments">
	                <filter string="Hoje" domain="[('date_maturity','=',time.strftime('%%Y-%%m-%%d'))]" help="Contas de hoje" name="Today"/>
	                <filter string="Vencidas" domain="[('date_maturity','&lt;',time.strftime('%%Y-%%m-%%d'))]" help="Contas em atraso" name="overdue"/>
	                <separator orientation="vertical"/>
	                <filter string="A pagar" domain="[('account_type', '=', 'liability_payable'), ('debit', '=', 0)]" help="Registros pagos" name="payables"/>
	                <filter string="A receber" domain="[('account_type', '=', 'asset_receivable'), ('credit', '=', 0)]" help="Pagamentos em aberto" name="receivables"/>
	                <separator orientation="vertical"/>
	                <filter string="Pagos" domain="[('reconciled','=', True)]" help="Registros pagos" name="paid"/>
	                <filter string="Abertos" domain="[('reconciled','=', False)]" help="Pagamentos em aberto" name="open"/>
	                <separator orientation="vertical"/>
	                <field name="name"/>
	                <field name="account_id"/>
	                <field name="partner_id"/>
	                <field name="date_maturity"/>
	                <field name="payment_date"/>
	                <group expand="0" string="Agrupar por...">
	                    <filter name="group_partner" string="Parceiro" domain="[]" context="{'group_by':'partner_id'}"/>
	                    <filter name="group_date" string="Data de Vencimento" domain="[]" context="{'group_by':'date_maturity:day'}"/>
	                    <filter name="group_month" string="Mês" domain="[]" context="{'group_by':'date_maturity'}"/>
	               </group>
	           </search>
	        </field>
	    </record>
	        
        <record id="view_pay_and_rec_move_line_action" model="ir.actions.act_window">
            <field name="name">Contas a Receber/Pagar</field>
            <field name="res_model">account.move.line</field>
            <field name="view_mode">tree,graph,pivot</field>
            <field name="view_id" ref="view_pay_and_rec_list"/>
            <field name="search_view_id" ref="view_pay_and_rec_filter"/>
            <field name="context">{'search_default_open': 1}</field>
            <field name="domain">['|', '&amp;', ('account_type', '=', 'liability_payable'), ('debit', '=', 0),
                                  '&amp;', ('account_type', '=', 'asset_receivable'), ('credit', '=', 0)]</field>
        </record>
    
        <record id="view_pay_and_rec_move_line_action_tree" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="view_pay_and_rec_move_line_action"/>
            <field name="sequence" eval="0"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_pay_and_rec_list"/>
        </record>

        <record id="view_pay_and_rec_move_line_action_pivot" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="view_pay_and_rec_move_line_action"/>
            <field name="sequence" eval="1"/>
            <field name="view_mode">pivot</field>
            <field name="view_id" ref="view_pay_and_rec_pivot"/>
        </record>

        <record id="view_pay_and_rec_move_line_action_graph" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="view_pay_and_rec_move_line_action"/>
            <field name="sequence" eval="2"/>
            <field name="view_mode">graph</field>
            <field name="view_id" ref="view_pay_and_rec_graph_date"/>
        </record>
    
    </data>
</odoo>
